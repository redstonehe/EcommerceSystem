@{
    Layout = null;
}
<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>@{@WorkContext.MallConfig.SiteTitle}</title>
    <meta name="keywords" content="@WorkContext.MallConfig.SEOKeyword" />
    <meta name="description" content="@WorkContext.MallConfig.SEODescription" />
    @*<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">*@
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
	<meta name="flexible" content="initial-dpr=2" />
    @*<script src="http://g.tbcdn.cn/mtb/lib-flexible/0.3.4/??flexible_css.js,flexible.js"></script>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">*@
    <link href="@{@WorkContext.CSSCDN}/mobile/css/base.css" rel="stylesheet" type="text/css">
    <link href="@{@WorkContext.CSSCDN}/mobile/css/home.css?V=201812" rel="stylesheet" type="text/css">
    <script src="@{@WorkContext.ScriptCDN}/mobile/scripts/jquery.js" type="text/javascript"></script>
    <script src="@{@WorkContext.ScriptCDN}/mobile/scripts/common.js" type="text/javascript"></script>

    <!-- Link Swiper's CSS -->
    <link rel="stylesheet" href="/mobile/css/swiper.min.css">
    <!-- Swiper JS -->
    <script src="/mobile/scripts/swiper.min.js"></script>

    <link rel="stylesheet" type="text/css" href="/mobile/css/subindex.css?V=201812" />
    <style>
        /*html {
        font-size:10px;}*/
        .title_more {
            text-decoration: none;
            float: right;
            display: inline-block;
            height: 40px;
            line-height: 40px;
            color: #D60008;
            margin-right: 10px;
            font-size: 14px;
        }

            .title_more:hover {
                color: blue;
            }

        .floorCon1 {
            display: box;
            display: -webkit-box;
            -webkit-box-pack: center;
            width: 100%;
            z-index: 100;
        }

            .floorCon1 .fc-list {
                width: 100%;
                display: -webkit-box;
                display: box;
                -webkit-box-pack: justify;
                -webkit-box-orient: vertical;
            }

                .floorCon1 .fc-list a {
                    display: block;
                    width: 100%;
                }

        .floorCon .fc-list a img {
            max-width: 100%;
            display: block;
            margin: 0;
            padding: 0;
        }


        .topsearch {
            position: relative;
        }

            .topsearch ul {
                display: none;
                width: 97%;
                position: absolute;
                top: 53px;
                left: 9px;
                list-style: none;
                padding: 0px;
                margin: 0px;
                /*width: 400px;*/
                border: 1px solid #C0C0C0;
                border-top: none;
                z-index: 9999999;
                background: #fff;
            }

                .topsearch ul li {
                    padding: 0px;
                    margin: 0px;
                }

                    .topsearch ul li:hover {
                        background: #f1f1f1;
                    }

                    .topsearch ul li a {
                        padding: 0 10px;
                        text-decoration: none;
                        color: #333;
                        height: 24px;
                        display: block;
                        overflow: hidden;
                        text-overflow: ellipsis;
                        white-space: nowrap;
                        width: 100%;
                        line-height: 24px;
                    }
    </style>
    <link rel="stylesheet" type="text/css" href="/mobile/css/jquery.bxslider.css" />

    <script type="text/javascript" src="/mobile/scripts/jquery.bxslider.min.js"></script>
    <script>
        window.onload = function () {
            $(".slider").css("height", $(".sliderBox ul li").css("height"));
        };

        $(function(){
            var a=$(".gprolist li a img").width();
            $(".gprolist li a img").css("height", a);
        });
        //var fun = function (doc, win) {
        //    var docEl = doc.documentElement,
        //        resizeEvt = 'orientationchange' in window ? 'orientationchange' : 'resize',
        //        recalc = function () {
        //            var clientWidth = docEl.clientWidth;
        //            if (!clientWidth) return;

        //            //这里是假设在640px宽度设计稿的情况下，1rem = 20px；
        //            //可以根据实际需要修改
        //            docEl.style.fontSize = 20 * (clientWidth / 640) + 'px';
        //        };
        //    if (!doc.addEventListener) return;
        //    win.addEventListener(resizeEvt, recalc, false);
        //    doc.addEventListener('DOMContentLoaded', recalc, false);
        //}
        //fun(document, window);
        
    </script>
    <script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
    @Html.Raw(new VMall.Web.Mobile.WeiXinShareScript().RegisterWeiXinShareScript(WorkContext.MallConfig.SiteTitle, WorkContext.MallConfig.SEODescription, "http://" + WorkContext.MallConfig.SiteUrl + "/mobile/images/logo.jpg",WorkContext.Uid,1))

</head>

<body>
    <div class="viewport">
        <style>
            .topAdv .close {
                position: absolute;
                right: 0px;
                top: 0px;
                background: #FFF;
                border: 1px solid #DDD;
                display: block;
                width: 20px;
                height: 20px;
                line-height: 16px;
                font-size: 14px;
                text-align: center; /*background:#C2C2C2;*/
                color: #000;
            }

                .topAdv .close:hover {
                    background: #333;
                }
        </style>
        @if (DateTime.Now <= new DateTime(2017, 5, 11))
        {
            <div id="topADBox" style="background: #fff;">
                <div class="topAdv">
                    <a href="#">
                        <img src="/images/mobtopadv.jpg" width="100%" height="80" alt="" /></a>
                    <a href="javascript:;" class="close" onclick="this.parentNode.style.display='none'">x</a>
                </div>
            </div>
        }
        <div class="page-header">
            <div class="cf-container">

                <ul class="cf-content" id="nav-bar">
                    <li class="cf-tab-item"><a class="cur-cf-tab" href="#">首页</a></li>
                    <li class="cf-tab-item"><a href="/mob/list/3.html">美容护肤</a></li>
                    <li class="cf-tab-item"><a href="/mob/list/6.html">健康食品</a></li>
                    <li class="cf-tab-item"><a href="#">&nbsp;</a></li>
                    @*<li class="cf-tab-item"><a href="#">美容护肤</a></li>*@
                </ul>
            </div>
        </div>

        <div class="homeBanner floor" style="margin-bottom: 0px;">
            @{
                BannerInfo[] bannerList = Banners.GetHomeBannerList(1).OrderBy(x => x.DisplayOrder).ToArray();
            }
            <div class="sliderBox">
                <ul class="slider" id="bannerImgList" style="height: auto;">
                    @foreach (BannerInfo info in bannerList)
                    {
                        <li><a href="@info.Url">
                            <img src="/upload/banner/@info.Img"></a></li>
                    }
                </ul>
                @if (bannerList.Length > 1)
                {
                    <script type="text/javascript">
						
                        $(function () {
                            var width = document.body.getElementsByTagName("div")[0].clientWidth;
                            var liList = document.getElementById("bannerImgList").getElementsByTagName("li");


                            for (var i = 0; i < liList.length; i++) {
                                liList[i].style.width = width + "px";
                            }
                            $('#bannerImgList').bxSlider({
                                auto: true,
                                mode: 'horizontal',
                                //speed:5000,
                                autoHover: true,
                                pause: 5000,
                                controls: false,
                                autoControls: false,
                            });
                        });
                    </script>
                }
                else
                {
                    <div class="bannerBt" id="bannerTabList">
                        @for (int i = 0; i < bannerList.Length; i++)
                        {
                            <span class="point @(i == 0 ? "hot" : "")"></span> 
                        }
                    </div>
                    <script type="text/javascript">
                        $(function(){
                            //首页切换图片需要计算：根据当前分辨率计算每个图片的宽度赋值给li（图片是根据li的宽度自适应的）
                            var width = document.body.getElementsByTagName("div")[0].clientWidth;
                            var liList = document.getElementById("bannerImgList").getElementsByTagName("li");
                            var spanList = document.getElementById("bannerTabList").getElementsByTagName("span");
                            $(".slider").css("height",$(".sliderBox").css("height"));
                            for (var i = 0; i < liList.length; i++) {
                                liList[i].style.width = width + "px";
                            }
                        });
                        //banner滚动
                        var bannerImgIndex = 0;
                        var bannerImgCount = @bannerList.Length;
                        if(bannerImgCount > 1) {
                            window.setInterval(function () {
                                if (bannerImgIndex == (bannerImgCount - 1)) {
                                    bannerImgIndex = 0;
                                }
                                else {
                                    bannerImgIndex += 1;
                                }
                                for (var i = 0; i < liList.length; i++) {
                                    liList[i].style.display = "none";
                                    liList[i].setAttribute("type","nocheck");
                                }
                                for (var i = 0; i < spanList.length; i++) {
                                    spanList[i].className = "point";
                                }
                                liList[bannerImgIndex].style.display = "block";
                                liList[bannerImgIndex].setAttribute("type","check");
                                spanList[bannerImgIndex].className = "point hot";
                            }, 3000)
                        }
                    </script>
                }
            </div>


        </div>
        @{
            List<AdvertInfo> NvaList = Adverts.GetAdvertList(5).OrderBy(x => x.DisplayOrder).ToList();
        }
        @if (NvaList.Any())
        {
            <nav class="m-hg-nav">

                @foreach (var item in NvaList)
                {
                    <a href="@item.Url" class="m-hg-link shopping-cart">
                        <img src="/upload/advert/@item.Body" alt="" width="80%" height="80%" />
                        @*<div class="m-gh-nav-title">@item.Title</div>*@
                    </a> 
                }
                @*<a href="@Url.Action("index", "cart")" class="m-hg-link shopping-cart">
			<img src="/images/indexinco1.jpg" alt="" width="80" height="80" />
			<div class="m-gh-nav-title">购物车</div>
		</a> 
		<a href="@Url.Action("index", "cart")" class="m-hg-link shopping-cart">
			<img src="/images/indexinco1.jpg" alt="" width="80" height="80" />
			<div class="m-gh-nav-title">购物车</div>
		</a> *@

            </nav>
        }

@*        <div class="floorI floor">
            <h2 class="title">热销产品</h2>
            <div class="floorCon  ">
                <!-- Swiper -->
                <div class="swiper-container">
                    <div class="swiper-wrapper">
                        @{
                            List<AdvertInfo> hotlist = Adverts.GetAdvertList(2).OrderBy(x => x.DisplayOrder).ToList();
                        }
                        @foreach (var item in hotlist)
                        { 
                            <div class="swiper-slide">
                                <a href="@item.Url" class ="">
                                    <div>
                                        <img src="/upload/advert/@item.Body" alt="" width="100%" />
                                        <div style="display: block;">
                                            <p>@item.Title</p>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        }
                    </div>
                    <!-- Add Pagination -->
                    <div class="swiper-pagination"></div>
                    <div class="swiper-scrollbar"></div>
                </div>

                <!-- Initialize Swiper -->
                <script>
                    var swiper = new Swiper('.swiper-container', {
                        pagination: '',
                        slidesPerView: 3,
                        scrollbar:'.swiper-scrollbar',
                        scrollbarHide:true,
                        paginationHide :true,
                        slidesOffsetAfter : 100,
                        spaceBetween: 30
                    });
                </script>

            </div>
        </div>*@

        <div class="floorI floor">
            <h2 class="title">商城推荐</h2>
            <div class="floorCon  ">
                <!-- Swiper -->
                <div class="swiper-container">
                    <div class="swiper-wrapper">
                        @{
                            List<AdvertInfo> recomendList = Adverts.GetAdvertList(3).OrderBy(x => x.DisplayOrder).ToList();
                        }
                        @foreach (var item in recomendList)
                        {
                            <div class="swiper-slide">
                                <a href="@item.Url">
                                    <div>
                                        <img src="/upload/advert/@item.Body" alt="" width="100%" />
                                        <div style="display: block;">
                                            <p>@item.Title</p>

                                        </div>
                                    </div>
                                </a>
                            </div>
                        }

                    </div>
                    <!-- Add Pagination -->
                    <div class="swiper-pagination"></div>
                    <div class="swiper-scrollbar"></div>
                </div>

                <!-- Initialize Swiper -->
                <script>
                    var swiper = new Swiper('.swiper-container', {
                        pagination: '',
                        slidesPerView: 3,
                        scrollbar:'.swiper-scrollbar',
                        scrollbarHide:true,
                        paginationHide :true,
                        slidesOffsetAfter : 100,
                        spaceBetween: 30
                    });
                </script>

            </div>
        </div>

        <div class="floorI floor">
            <h2 class="title">精品活动</h2>
            <div class="floorCon floorCon1">
                <div class="fc-list">
                    <a href="#">
                        <img src="/mobile/images/baojian_cate.jpg" alt="" width="100%">
                    </a>
                    @*<a href="#">
						<img src="/mobile/images/jujia_cate.jpg" alt="" width="100%">
					</a>*@
                    @*<a href="#">
						<img src="/mobile/images/meizhuang_cate.jpg" alt="" width="100%" />
					</a>*@
                    <a href="#">
                        <img src="/mobile/images/geren_cate.jpg" alt="" width="100%" />
                    </a>
                </div>
            </div>
        </div>

        <div class="floorI floor">
            <h2 class="title">精品推荐</h2>
            <div class="floorCon  ">
                <div class="floor">
                    @{
                        List<AdvertInfo> floor5 = Adverts.GetAdvertList(7).OrderBy(x => x.DisplayOrder).ToList();
                    }
                    <div class="hot-goods-box">
                        <div class="sgb-cont itemdiv" id="hot1">
                            <ul class="gprolist">
                                @foreach (var info in floor5)
                                { 
                                    <li class="">
                                        <a href="@info.Url">
                                            <img src="/upload/advert/@info.Body" alt="" width="100%"  /></a>
                                        <h4>@info.ExtField1</h4>
                                        <p class="index_mod_iconprice">¥@info.ExtField2</p>
                                    </li>
                                }
                            </ul>
                            <div class="clear"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        @Html.Partial("/mobile/views/publicpage/footer2017.cshtml")
    </div>
    @Html.Raw(WorkContext.MallConfig.Script)
</body>
</html>

