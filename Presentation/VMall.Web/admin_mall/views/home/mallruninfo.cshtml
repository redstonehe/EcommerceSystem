@model VMall.Web.MallAdmin.Models.MallRunInfoModel
@section header{
    <title>SEEDM1管理中心</title>
    <link type="text/css" rel="stylesheet" href="/admin_mall/content/css/site.css" />
    <script type="text/javascript" src="/admin_mall/scripts/jquery.js"></script>
    @*<link href="/admin_mall/content/themes/base/jquery-ui.css" rel="stylesheet" />*@
    @*<script src="~/Scripts/jquery-1.8.3.min.js"></script>*@
    @* <script src="/admin_mall/scripts/jquery-ui.js"></script>
    <script src="/admin_mall/scripts/jquery.cleverTabs.js"></script>
    <script src="/admin_mall/scripts/jquery.contextMenu.js"></script>*@
    <!-- Tell the browser to be responsive to screen width -->
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <!-- Bootstrap 3.3.7 -->
    <link rel="stylesheet" href="/admin_mall/static/bower_components/bootstrap/dist/css/bootstrap.min.css">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="/admin_mall/static/bower_components/font-awesome/css/font-awesome.min.css">
    <!-- Ionicons -->
    <link rel="stylesheet" href="/admin_mall/static/bower_components/Ionicons/css/ionicons.min.css">
    <!-- Theme style -->
    <link rel="stylesheet" href="/admin_mall/static/dist/css/AdminLTE.min.css">
    <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
    <link rel="stylesheet" href="/admin_mall/static/dist/css/skins/_all-skins.min.css">
    <!-- Morris chart -->
    <link rel="stylesheet" href="/admin_mall/static/bower_components/morris.js/morris.css">
    <!-- jvectormap -->
    <link rel="stylesheet" href="/admin_mall/static/bower_components/jvectormap/jquery-jvectormap.css">
    <!-- Date Picker -->
    <link rel="stylesheet" href="/admin_mall/static/bower_components/bootstrap-datepicker/dist/css/bootstrap-datepicker.min.css">
    <!-- Daterange picker -->
    <link rel="stylesheet" href="/admin_mall/static/bower_components/bootstrap-daterangepicker/daterangepicker.css">
    <!-- bootstrap wysihtml5 - text editor -->
    <link rel="stylesheet" href="/admin_mall/static/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.min.css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->

    <!-- Google Font -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,300italic,400italic,600italic">


    <!-- jQuery 3 -->
    <script src="/admin_mall/static/bower_components/jquery/dist/jquery.min.js"></script>
    <!-- jQuery UI 1.11.4 -->
    <script src="/admin_mall/static/bower_components/jquery-ui/jquery-ui.min.js"></script>
    <!-- Resolve conflict in jQuery UI tooltip with Bootstrap tooltip -->
    <script>
        $.widget.bridge('uibutton', $.ui.button);
</script>
    <!-- Bootstrap 3.3.7 -->
    <script src="/admin_mall/static/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <!-- Morris.js charts -->
    <script src="/admin_mall/static/bower_components/raphael/raphael.min.js"></script>
    <script src="/admin_mall/static/bower_components/morris.js/morris.min.js"></script>
    <!-- Sparkline -->
    <script src="/admin_mall/static/bower_components/jquery-sparkline/dist/jquery.sparkline.min.js"></script>
    <!-- jvectormap -->
    <script src="/admin_mall/static/plugins/jvectormap/jquery-jvectormap-1.2.2.min.js"></script>
    <script src="/admin_mall/static/plugins/jvectormap/jquery-jvectormap-world-mill-en.js"></script>
    <!-- jQuery Knob Chart -->
    <script src="/admin_mall/static/bower_components/jquery-knob/dist/jquery.knob.min.js"></script>
    <!-- daterangepicker -->
    <script src="/admin_mall/static/bower_components/moment/min/moment.min.js"></script>
    <script src="/admin_mall/static/bower_components/bootstrap-daterangepicker/daterangepicker.js"></script>
    <!-- datepicker -->
    <script src="/admin_mall/static/bower_components/bootstrap-datepicker/dist/js/bootstrap-datepicker.min.js"></script>
    <!-- Bootstrap WYSIHTML5 -->
    <script src="/admin_mall/static/plugins/bootstrap-wysihtml5/bootstrap3-wysihtml5.all.min.js"></script>
    <!-- Slimscroll -->
    <script src="/admin_mall/static/bower_components/jquery-slimscroll/jquery.slimscroll.min.js"></script>
    <!-- FastClick -->
    <script src="/admin_mall/static/bower_components/fastclick/lib/fastclick.js"></script>
    <!-- AdminLTE App -->
    <script src="/admin_mall/static/dist/js/adminlte.min.js"></script>
    <!-- AdminLTE dashboard demo (This is only for demo purposes) -->
    <script src="/admin_mall/static/dist/js/pages/dashboard.js?111"></script>
    <!-- AdminLTE for demo purposes -->
    <script src="/admin_mall/static/dist/js/demo.js"></script>

    <style type="text/css">
        .dataList table td, .dataList table th {
            padding-left: 10px;
        }

        .logdataList {
            padding-left: 5px;
            margin-top: 2px;
            text-align: left;
        }

            .logdataList table th {
                background: #f5f5f5;
                /*background: #F1F1F1;*/
                padding: 4px 10px;
                font-weight: normal;
                cursor: pointer;
                border: 1px solid #ddd;
            }

            .logdataList table td {
                padding: 4px 0;
                border: 1px solid #ddd;
            }

            .logdataList table tbody td:nth-child(1) {
                width: 1px;
                text-align: center;
            }

            .logdataList table tbody td:nth-child(2) {
                width: 100px;
                padding-left: 5px;
            }

            .logdataList table .hot {
                color: red;
            }

        .systemNews {
            padding: 10px;
            border-bottom: 1px solid #808080;
        }

        .download {
            color: #359fc0;
            margin-left: 100px;
            position: relative;
        }

            .download:before {
                content: '';
                background: url(/admin_mall/content/images/investdir_icon_01.png) no-repeat center;
                width: 14px;
                height: 14px;
                display: block;
                position: absolute;
                left: -20px;
                top: 50%;
                margin-top: -6px;
            }

        .newDiv {
        }

            .newDiv:hover {
                background: #F1F1F1;
            }

        .mallnotes div:nth-child(2) {
            color: red;
        }
    </style>
}

@section body{
    <!-- Content Header (Page header) -->
    <section class="content-header">
        <h1>商城管理中心
       
            <small>首页</small>
        </h1>
        @*<ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> Home</a></li>
        <li class="active">首页</li>
      </ol>*@
    </section>

    <!-- Main content -->
    <section class="content">
        <!-- Small boxes (Stat box) -->
        <div class="row">
            <div class="col-lg-3 col-xs-6">
                <!-- small box -->
                <div class="small-box bg-aqua">
                    <div class="inner">
                        <h3>@Model.AllOrderToday</h3>

                        <p>今日新订单</p>
                    </div>
                    <div class="icon">
                        <i class="ion ion-bag"></i>
                    </div>
                    <a href="/malladmin/order/orderlist" class="small-box-footer">更多信息 <i class="fa fa-arrow-circle-right"></i></a>
                </div>
            </div>
            <!-- ./col -->
            <div class="col-lg-3 col-xs-6">
                <!-- small box -->
                <div class="small-box bg-green">
                    <div class="inner">
                        <h3>@Model.AllProductCount</h3>

                        <p>商品数</p>
                    </div>
                    <div class="icon">
                        <i class="ion ion-stats-bars"></i>
                    </div>
                    <a href="/malladmin/product/onsaleproductlist" class="small-box-footer">更多信息 <i class="fa fa-arrow-circle-right"></i></a>
                </div>
            </div>
            <!-- ./col -->
            <div class="col-lg-3 col-xs-6">
                <!-- small box -->
                <div class="small-box bg-yellow">
                    <div class="inner">
                        <h3>@Model.AllUsersCount</h3>

                        <p>注册用户数</p>
                    </div>
                    <div class="icon">
                        <i class="fa fa-user"></i>
                    </div>
                    <a href="/malladmin/user/list" class="small-box-footer">更多信息 <i class="fa fa-arrow-circle-right"></i></a>
                </div>
            </div>
            <!-- ./col -->
            <div class="col-lg-3 col-xs-6">
                <!-- small box -->
                <div class="small-box bg-red">
                    <div class="inner">
                        <h3>@Model.AllInformCount</h3>

                        <p>未处理投诉建议</p>
                    </div>
                    <div class="icon">
                        <i class="fa fa-envelope-o"></i>
                    </div>
                    <a href="/malladmin/complain/complainlist" class="small-box-footer">更多信息 <i class="fa fa-arrow-circle-right"></i></a>
                </div>
            </div>
            <!-- ./col -->
        </div>
        <!-- /.row -->
        <!-- Main row -->
        <div class="row">
            <!-- Left col -->
            <section class="col-lg-7 connectedSortable">
                <!-- Custom tabs (Charts with tabs)-->
                <div class="nav-tabs-custom">
                    <!-- Tabs within a box -->
                    <ul class="nav nav-tabs pull-right">
                        <li class="active"><a href="#revenue-chart" data-toggle="tab">近15天</a></li>
                        @*<li><a href="#sales-chart" data-toggle="tab">Donut</a></li>*@
                        <li class="pull-left header"><i class="fa fa-inbox"></i>订单数</li>
                    </ul>
                    <div class="tab-content no-padding">
                        <!-- Morris chart - Sales -->
                        @* <div class="chart tab-pane active" id="revenue-chart" style="position: relative; height: 300px;"></div>*@
                        <div class="chart tab-pane active" id="graph" style="position: relative; height: 300px;"></div>
                        @*<div class="chart tab-pane" id="sales-chart" style="position: relative; height: 300px;"></div>*@
                    </div>
                </div>
                <!-- /.nav-tabs-custom -->
                <script>
                    Date.prototype.Format = function (fmt) { //author: meizz   
                        var o = {
                            "M+": this.getMonth() + 1,                 //月份   
                            "d+": this.getDate(),                    //日   
                            "h+": this.getHours(),                   //小时   
                            "m+": this.getMinutes(),                 //分   
                            "s+": this.getSeconds(),                 //秒   
                            "q+": Math.floor((this.getMonth() + 3) / 3), //季度   
                            "S": this.getMilliseconds()             //毫秒   
                        };
                        if (/(y+)/.test(fmt))
                            fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
                        for (var k in o)
                            if (new RegExp("(" + k + ")").test(fmt))
                                fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
                        return fmt;
                    }
                    // 	 ajax请求从后台获取数据	
                    $.ajax({
                        type: "GET",
                        url: "/malladmin/home/orderchart",
                        contentType: "application/x-www-form-urlencoded",
                        dataType: "JSON",
                        async: false,
                        success: function (result) {
                            //alert(result);
                            var orderSale = new Morris.Line({
                                element: 'graph',
                                resize: true,
                                data: result,
                                xkey: 'time',
                                ykeys: ['count'],
                                labels: ['订单数'],
                                lineColors:  ['#a0d0e0'],
                                hideHover: 'false',
                                units: ' 单',
                                smooth:'true',
                                //dateFormat: function (x) { return new Date(x).Format("yyyy-MM-dd");; }
                            });

                            $('.box ul.nav a').on('shown.bs.tab', function () {
                                orderSale.redraw();
                            });
                        },
                        error: function () {
                            console.log("服务器异常");
                        }
                    });

                </script>

            </section>
            <!-- /.Left col -->
            <!-- right col (We are only adding the ID to make the widgets sortable)-->
            <section class="col-lg-5 connectedSortable">


                <!-- solid sales graph -->
                <div class="box box-solid bg-teal-gradient">
                    <div class="box-header">
                        <i class="fa fa-th"></i>

                        <h3 class="box-title">销售图表</h3>

                        <div class="box-tools pull-right">
                            <button type="button" class="btn bg-teal btn-sm" data-widget="collapse">
                                <i class="fa fa-minus"></i>
                            </button>
                            <button type="button" class="btn bg-teal btn-sm" data-widget="remove">
                                <i class="fa fa-times"></i>
                            </button>
                        </div>
                    </div>
                    <div class="box-body border-radius-none">
                        <div class="chart" id="line-chart" style="height: 300px;"></div>
                    </div>
                    <script>
                       
                        // 	 ajax请求从后台获取数据	
                        $.ajax({
                            type: "GET",
                            url: "/malladmin/home/OrderAmountChart",
                            contentType: "application/x-www-form-urlencoded",
                            dataType: "JSON",
                            async: false,
                            success: function (result) {
                                //alert(result);
                                var orderAmount = new Morris.Line({
                                    element: 'line-chart',
                                    resize: true,
                                    data: result,
                                    xkey: 'time',
                                    ykeys: ['amount'],
                                    labels: ['订单金额'],
                                    lineColors: ['#F39C12'],
                                    lineWidth: 2,
                                    //hideHover: 'false',
                                    gridTextColor: '#fff',
                                    gridStrokeWidth: 0.4,
                                    pointSize: 4,
                                    pointStrokeColors: ['#efefef'],
                                    gridLineColor: '#efefef',
                                    gridTextFamily: 'Open Sans',
                                    gridTextSize: 10,
                                    units: ' 元',
                                    smooth: 'true',
                                    hoverLabelColor: ['#DD4B39'],
                                    hoverBorderColor: ['#DD4B39']
                                });

                                $('.box ul.nav a').on('shown.bs.tab', function () {
                                    orderAmount.redraw();
                                });
                            },
                            error: function () {
                                console.log("服务器异常");
                            }
                        });
                        //$(function () {
                        //    $("#line-chart .morris-hover .morris-hover-point").css("color","red");
                        //});
                </script>

                    <!-- /.box-body -->
                    @*<div class="box-footer no-border">
                        <div class="row">
                            <div class="col-xs-4 text-center" style="border-right: 1px solid #f4f4f4">
                                <input type="text" class="knob" data-readonly="true" value="20" data-width="60" data-height="60"
                                    data-fgcolor="#39CCCC">

                                <div class="knob-label">Mail-Orders</div>
                            </div>
                            <!-- ./col -->
                            <div class="col-xs-4 text-center" style="border-right: 1px solid #f4f4f4">
                                <input type="text" class="knob" data-readonly="true" value="50" data-width="60" data-height="60"
                                    data-fgcolor="#39CCCC">

                                <div class="knob-label">Online</div>
                            </div>
                            <!-- ./col -->
                            <div class="col-xs-4 text-center">
                                <input type="text" class="knob" data-readonly="true" value="30" data-width="60" data-height="60"
                                    data-fgcolor="#39CCCC">

                                <div class="knob-label">In-Store</div>
                            </div>
                            <!-- ./col -->
                        </div>
                        <!-- /.row -->
                    </div>*@
                    <!-- /.box-footer -->
                </div>
                <!-- /.box -->

            </section>
            <!-- right col -->
        </div>
        <!-- /.row (main row) -->

    </section>
    <!-- /.content -->


    @*    <h1 class="rightH1">SEEDM1管理中心
        <div class="right">
            <div class="clear"></div>
        </div>
        <div class="clear"></div>
    </h1>
    <br />
    @if (WorkContext.MallAGid == 2 || WorkContext.MallAGid == 4 || WorkContext.MallAGid == 6 || WorkContext.MallAGid == 8 || WorkContext.MallAGid == 16 || WorkContext.MallAGid == 18 )
    {
        <div class="dataList">
            <table width="100%">
                <thead>
                    <tr>
                        <th align="left" colspan="4">订单统计</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td align="left" width="80px">待付款:</td>
                        <td align="left" width="300px"><a href="@Url.Action("orderlist", "order", new RouteValueDictionary { { "orderState", (int)OrderState.WaitPaying } })">@Model.WaitPayCount</a></td>
                        <td align="left" width="80px">待确认:</td>
                        <td align="left"><a href="@Url.Action("orderlist", "order", new RouteValueDictionary { { "orderState", (int)OrderState.Confirming } })">@Model.WaitConfirmCount</a>
                        </td>
                    </tr>
                    <tr>
                        <td align="left" width="80px">待备货:</td>
                        <td align="left" width="300px"><a href="@Url.Action("orderlist", "order", new RouteValueDictionary { { "orderState", (int)OrderState.Confirmed } })">@Model.WaitPreProductCount</a></td>
                        <td align="left" width="80px">待发货:</td>
                        <td align="left"><a href="@Url.Action("orderlist", "order", new RouteValueDictionary { { "orderState", (int)OrderState.PreProducting } })">@Model.WaitSendCount</a>
                        </td>

                    </tr>
                    <tr>
                        <td align="left" width="100px">今日订单数:</td>
                        <td align="left" width="300px"><a href="@Url.Action("orderlist", "order")">@Model.AllOrderToday</a></td>
                        <td align="left" width="100px">今日有效订单数:</td>
                        <td align="left"><a href="@Url.Action("orderlist", "order")">@Model.ValidOrderToday</a>
                        </td>
                    </tr>
                     <tr>
                        <td align="left" width="120px">今日有效订单金额:</td>
                        <td align="left" width="300px"><a href="@Url.Action("orderlist", "order")">@Model.ValidOrderAmountToday.ToString("f2")</a></td>
                        <td align="left" width="130px">今日有效订单实收金额:</td>
                        <td align="left"><a href="@Url.Action("orderlist", "order")">@Model.ValidOrderSurplusMoneyToday.ToString("f2")</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <br />
        <div class="dataList">
            <table width="100%">
                <thead>
                    <tr>
                        <th align="left" colspan="6">订单售后</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td align="left" width="80px">待退货:</td>
                        @{var returnCount = OrderReturn.GetOrderReturnCount("[state] = 2");}
                        <td align="left" width="300px"><a href="@Url.Action("ReturnList", "order", new RouteValueDictionary { { "state", 2 } })">@returnCount</a>
                        </td>
                        <td align="left" width="80px">待退款:</td>
                        @{var refundCount = AdminOrderRefunds.GetOrderRefundCount("[state] = 0");}
                        <td align="left" width="300px"><a href="@Url.Action("refundlist", "order", new RouteValueDictionary { { "state", 0 } })">@returnCount</a>
                        </td>
                        <td align="left" width="80px">待换货:</td>
                        @{var changeCount = OrderChange.GetOrderChangeCount("[state]=1");}
                        <td align="left"><a href="@Url.Action("orderchangelist", "order", new RouteValueDictionary { { "state", 1 } })">@changeCount</a></td>

                    </tr>
                </tbody>
            </table>
        </div>
        <br />


         <div class="mallUpdateLog" style="border:1px solid #ddd;padding:20px;margin-bottom:30px;">
             <h2>商城政策</h2>
             <p style="color:gray;"><del>1.直销会员购买“和治友德”品牌产品，买一送一，PV减半（产品添加商品品牌选择，非和治友德品牌产品请勿选择和治友德品牌）--已停止</del></p>
             <p>1.1.直销会员购买“和治友德旗舰店”专区产品（PV大于0），买一送一，PV减半（添加产品时选择频道专区，非重消产品请勿选择“和治友德旗舰店”频道专区）--2018/08/08 开始执行</p>
         </div>
        <br />
        <div class="mallUpdateLog">
            <div style="border: 1px solid #ddd; float: left; width: 49%; height: 500px;">
                <iframe src="/admin_mall/help/updateLog.html" width="100%" height="100%" frameborder="0"></iframe>

            </div>

            <div style="border: 1px solid #ddd; float: right; width: 49%; height: 500px;" class="mallnotes">
                <iframe src="/admin_mall/help/systemNote.html" width="100%" height="100%" frameborder="0"></iframe>
            </div>
            <div style="clear: both;"></div>
        </div>
    }
    else
    {
        <div style="text-align: center; margin: 15% auto">
            <h1>欢迎来到@(WorkContext.MallConfig.SiteTitle)后台管理系统！</h1>
            <br />
        </div>
    }*@
}